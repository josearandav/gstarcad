;(function($,window,document,Math,undefined){'use strict';var pluginName='rMenu';var Plugin=function(el,options){var o=this;o.optionsInit={minWidth:'769px',transitionSpeed:400,jqueryEasing:'swing',css3Easing:'ease',toggleBtnBool:true,toggleSel:'.rm-toggle',menuSel:'ul',menuItemsSel:'li',containerClass:'rm-container',navElementClass:'rm-nav',topMenuClass:'rm-top-menu',parentClass:'rm-parent',expandedClass:'rm-layout-expanded',contractedClass:'rm-layout-contracted',animateClass:'rm-css-animate',accelerateClass:'rm-accelerate',developmentMode:false};o.options=$.extend({},o.optionsInit,options);o.tButton=$(o.options.toggleSel);o.el=$(el);o.container=o.el.parent();o.menus=o.el.find(o.options.menuSel);o.topMenu=o.el.children(o.options.menuSel);o.timer=false;o.animateClass=o.options.animateClass;o.accelerateClass=o.options.accelerateClass;o.windowWidth=$(window).width();o.init=function(){o.setup();$(window).on({'resize':function(){if($(window).width()!==o.windowWidth){o.windowWidth=$(window).width();clearTimeout(o.timer);o.timer=setTimeout(o.adjust,500);}}});$(document).on('click.rm',function(){contract(o.topMenu);});return this;};o.setup=function(){o.container.addClass(o.options.containerClass);if(o.options.toggleBtnBool){o.tButton.addClass('rm-button');}else{o.tButton.removeClass('rm-button');}o.menus.addClass('rm-menu');o.el.removeClass('rm-nojs').addClass(o.options.navElementClass).off('click.rm').on('click.rm','.'+o.options.parentClass,parentClick).find(o.options.menuItemsSel+':first-child').addClass('rm-first').end().find(o.options.menuItemsSel).addClass('rm-menu-item').addBack().removeClass(o.options.parentClass).has(o.options.menuSel).addClass(o.options.parentClass);o.menus.attr('aria-hidden','false').hide();o.topMenu.addClass(o.options.topMenuClass);if(o.animateClass){if(typeof Modernizr!=='undefined'){if(!Modernizr.csstransitions){o.animateClass='';o.accelerateClass='';}else if(!Modernizr.csstransforms3d){o.accelerateClass='';}}else if(!transitionsSupported()){o.animateClass='';o.accelerateClass='';}else if(!transform3DSupported()){o.accelerateClass='';}}else{o.accelerateClass='';}o.tButton.removeClass('rm-nojs').off('click.rm').on('click.rm',tButtonClick);o.adjust();return this;};o.adjust=function(minWidth){minWidth=typeof minWidth!=='undefined'?minWidth:o.options.minWidth;if(typeof Modernizr!=='undefined'&&Modernizr.mq('only all')){if(o.options.developmentMode){console.log('Modernizr: MQ supported');}if(!Modernizr.mq('( min-width: '+minWidth+' )')){o.layoutContracted();}else{o.layoutExpanded();}}else{if(o.options.developmentMode){console.log('unable to detect MQ support');}if($(window).outerWidth()<parseInt(minWidth)){o.layoutContracted();}else{o.layoutExpanded();}}};o.layoutContracted=function(){if(!o.container.hasClass(o.options.contractedClass)){contract(o.topMenu);o.container.removeClass(o.options.expandedClass).addClass(o.options.contractedClass);if(o.animateClass){o.calculateHeights();o.menus.addClass(o.animateClass+' '+o.accelerateClass);}o.el.off('mouseenter.rm mouseleave.rm');o.tButton.addClass('rm-show');if(!o.tButton.hasClass('rm-active')){o.topMenu.addClass('accessibly-hidden').show();if(o.animateClass){o.topMenu.removeClass('rm-menu-expanded');}}else{o.topMenu.removeClass('accessibly-hidden').show();if(o.animateClass){o.topMenu.css({'max-height':'none'}).addClass('rm-menu-expanded');}}}if(o.options.developmentMode){console.log('responsive-menu: contracted layout');}return this;};o.layoutExpanded=function(){if(!o.container.hasClass(o.options.expandedClass)){contract(o.topMenu);o.container.removeClass(o.options.contractedClass).addClass(o.options.expandedClass);if(o.animateClass){o.calculateHeights();o.menus.addClass(o.animateClass+' '+o.accelerateClass);}o.el.off('mouseenter.rm mouseleave.rm').on('mouseenter.rm',o.options.menuItemsSel,parentEnter).on('mouseleave.rm',o.options.menuItemsSel,parentLeave);o.tButton.removeClass('rm-show');o.topMenu.removeClass('accessibly-hidden').show();if(o.animateClass){o.topMenu.css({'max-height':'none'}).addClass('rm-menu-expanded');}}if(o.options.developmentMode){console.log('responsive-menu: expanded layout');}return this;};o.calculateHeights=function(){o.menus.addClass('rm-calculate').removeClass('rm-menu-expanded').attr('style','').show(0);o.menus.each(function(){var $el=$(this);$el.data('height',$el.height());}).css({'max-height':'0'}).removeClass('rm-calculate');return this;};o.toggleMenu=function(el){contract(o.topMenu);if(!o.topMenu.hasClass('accessibly-hidden')){$(el).removeClass('rm-active');contract(o.container);}else{$(el).addClass('rm-active');o.topMenu.removeClass('accessibly-hidden');if(o.animateClass){o.topMenu.css('max-height','0');}else{o.topMenu.hide(0);}expand(o.el);}};var tButtonClick=function(e){e.preventDefault();e.stopPropagation();o.toggleMenu(e.target);};var parentClick=function(e){var $el=$(e.currentTarget);e.stopPropagation();if(!$el.hasClass('rm-hover')){e.preventDefault();clearTimeout(o.timer);contract($el.parent());expand($el);}};var parentEnter=function(e){var $el=$(e.currentTarget);e.stopPropagation();clearTimeout(o.timer);o.timer=setTimeout(function(){contract($el.parent());$el.addClass('rm-hover');if($el.hasClass(o.options.parentClass)){expand($el);}},200);};var parentLeave=function(e){var $el=$(e.currentTarget);clearTimeout(o.timer);o.timer=setTimeout(function(){contract($el.parent());},200);};var transitionEndContract=function(e){if(e.originalEvent.propertyName==='max-height'){var $el=$(e.currentTarget);e.stopPropagation();$el.css({'transition':'','max-height':'0'}).removeClass('rm-menu-expanded').off('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd');if($el.hasClass(o.options.topMenuClass)){$el.addClass('accessibly-hidden').show(0);}}};var transitionEndExpand=function(e){if(e.originalEvent.propertyName==='max-height'){var $el=$(e.currentTarget);e.stopPropagation();$el.removeClass('accessibly-hidden').css({'transition':'','max-height':'none'}).addClass('rm-menu-expanded').off('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd');}};var contract=function($parent){$parent.find('a').blur().end().find(o.options.menuItemsSel).removeClass('rm-hover');if(o.animateClass){var $menus=$parent.find(o.options.menuSel);$menus.each(function(){var $el=$(this);if($el.height()!==0){$el.css({'max-height':$el.height(),'transition':'max-height '+String(o.options.transitionSpeed/1000)+'s '+o.options.css3Easing}).on('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd',transitionEndContract);}else{$menus.not($el);}});$menus.hide(0).show(0);$menus.css({'max-height':'0'}).removeClass('rm-menu-expanded');}else{$parent.find(o.options.menuSel).slideUp(o.options.transitionSpeed,o.options.jqueryEasing,function(){if($(this).hasClass(o.options.topMenuClass)){o.topMenu.addClass('accessibly-hidden');}});}};var expand=function($el){var $menu=$el.children(o.options.menuSel);$el.addClass('rm-hover');if(o.animateClass){$menu.css({'transition':'max-height '+String(o.options.transitionSpeed/1000)+'s '+o.options.css3Easing,'max-height':$menu.data('height')}).on('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd',transitionEndExpand);}else{$menu.slideDown(o.options.transitionSpeed,o.options.jqueryEasing);}};o.init(el);return this;};$.fn[pluginName]=function(options){return this.each(function(){var $el=$(this);if(!$el.data(pluginName)){$el.data(pluginName,new Plugin(this,options));}});};var transform3DSupported=function(){var el=document.createElement('p'),has3d,transforms={'webkitTransform':'-webkit-transform','OTransform':'-o-transform','msTransform':'-ms-transform','MozTransform':'-moz-transform','transform':'transform'};document.body.insertBefore(el,null);for(var t in transforms){if(el.style[t]!==undefined){el.style[t]='translate3d(1px,1px,1px)';has3d=window.getComputedStyle(el).getPropertyValue(transforms[t]);}}document.body.removeChild(el);return(has3d!==undefined&&has3d.length>0&&has3d!=="none");};var transitionsSupported=function(){var b=document.body||document.documentElement,s=b.style,p='transition';if(typeof s[p]==='string'){return true;}var v=['Moz','webkit','Webkit','Khtml','O','ms'];p=p.charAt(0).toUpperCase()+p.substr(1);for(var i=0;i<v.length;i++){if(typeof s[v[i]+p]==='string'){return true;}}return false;};})(jQuery,window,document,Math);